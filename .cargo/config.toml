# Cargo configuration for sol_beast

# Enable wasm_js feature for getrandom when building for wasm32-unknown-unknown target
[target.wasm32-unknown-unknown]
rustflags = [
    "--cfg", "getrandom_backend=\"wasm_js\"",
    "-C", "target-feature=+bulk-memory,+nontrapping-fptoint,+sign-ext",
    # Increase linear memory budget for WASM to reduce out-of-bounds traps
    # 128 MiB initial, 1 GiB max (values must be multiples of 64 KiB)
    "-C", "link-arg=--initial-memory=134217728",
    "-C", "link-arg=--max-memory=1073741824"
]
